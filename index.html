
      box.textContent = "Volumetric weight: " + vw.toFixed(2) + " kg (L×W×H/5000).";
    });
    document.getElementById("btnResetCalc").addEventListener("click", () => {
      ["len","wid","hei"].forEach(id => document.getElementById(id).value = "");
      document.getElementById("calcResult").textContent = "Enter dimensions to calculate volumetric weight.";
    });

    // Quote wizard
    const s1 = document.getElementById("s1"), s2 = document.getElementById("s2"), s3 = document.getElementById("s3");
    const p1 = document.getElementById("p1"), p2 = document.getElementById("p2"), p3 = document.getElementById("p3");

    function activate(step){
      [s1,s2,s3].forEach(x => x.classList.remove("active"));
      [p1,p2,p3].forEach(x => x.style.display = "none");
      if(step===1){ s1.classList.add("active"); p1.style.display="block"; }
      if(step===2){ s2.classList.add("active"); p2.style.display="block"; }
      if(step===3){ s3.classList.add("active"); p3.style.display="block"; buildSummary(); }
      const quote = document.getElementById("quote");
      window.scrollTo({ top: quote.offsetTop - 70, behavior: "smooth" });
    }

    function escapeHtml(str){
      return String(str).replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[s]));
    }

    function buildSummary(){
      const name = document.getElementById("qName").value || "-";
      const email = document.getElementById("qEmail").value || "-";
      const phone = document.getElementById("qPhone").value || "-";
      const mode = document.getElementById("qMode").value || "-";
      const inc = document.getElementById("qIncoterm").value || "-";
      const from = document.getElementById("qFrom").value || "-";
      const to = document.getElementById("qTo").value || "-";
      const details = document.getElementById("qDetails").value || "-";

      document.getElementById("summaryBox").innerHTML =
        "<b>Contact</b><br>Name: " + escapeHtml(name) + "<br>Email: " + escapeHtml(email) + "<br>Phone: " + escapeHtml(phone) + "<br><br>" +
        "<b>Shipment</b><br>Mode: " + escapeHtml(mode) + "<br>Incoterm: " + escapeHtml(inc) + "<br>From: " + escapeHtml(from) + "<br>To: " + escapeHtml(to) + "<br><br>" +
        "<b>Details</b><br>" + escapeHtml(details).replace(/\\n/g,"<br>");
    }

    document.getElementById("next1").addEventListener("click", () => {
      const name = (document.getElementById("qName").value || "").trim();
      const email = (document.getElementById("qEmail").value || "").trim();
      if(!name || !email){ alert("Please enter name and email."); return; }
      activate(2);
    });
    document.getElementById("back2").addEventListener("click", () => activate(1));
    document.getElementById("next2").addEventListener("click", () => activate(3));
    document.getElementById("back3").addEventListener("click", () => activate(2));

    document.getElementById("submitQuote").addEventListener("click", () => {
      const name = (document.getElementById("qName").value || "").trim();
      const email = (document.getElementById("qEmail").value || "").trim();
      const phone = (document.getElementById("qPhone").value || "").trim();
      const mode = document.getElementById("qMode").value || "";
      const inc = document.getElementById("qIncoterm").value || "";
      const from = (document.getElementById("qFrom").value || "").trim();
      const to = (document.getElementById("qTo").value || "").trim();
      const details = (document.getElementById("qDetails").value || "").trim();

      const subject = encodeURIComponent("Quote Request — " + mode + " | " + (from || "Origin") + " → " + (to || "Destination"));
      const body = encodeURIComponent(
        "New Style Logistics — Quote Request\\n\\n" +
        "CONTACT\\nName: " + name + "\\nEmail: " + email + "\\nPhone/WhatsApp: " + (phone || "-") + "\\n\\n" +
        "SHIPMENT\\nMode: " + mode + "\\nIncoterm: " + (inc || "-") + "\\nFrom: " + (from || "-") + "\\nTo: " + (to || "-") + "\\n\\n" +
        "DETAILS\\n" + (details || "-") + "\\n"
      );

      window.location.href = "mailto:alwahti@newstylelogistics.com?subject=" + subject + "&body=" + body;
    });

    // Charts
    function drawLineChart(canvasId, values){
      const c = document.getElementById(canvasId);
      const ctx = c.getContext("2d");
      const w = c.width, h = c.height;
      ctx.clearRect(0,0,w,h);

      ctx.globalAlpha = 0.22;
      ctx.strokeStyle = "#ffffff";
      ctx.lineWidth = 1;
      for(let i=1;i<6;i++){
        const y = (h/6)*i;
        ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(w,y); ctx.stroke();
      }
      ctx.globalAlpha = 1;

      const pad = 36;
      const maxV = Math.max(...values);
      const minV = Math.min(...values);
      const span = Math.max(1, maxV - minV);

      function px(i){ return pad + ( (w - pad*2) * (i/(values.length-1)) ); }
      function py(v){ return (h - pad) - ((h - pad*2) * ((v - minV)/span)); }

      ctx.lineJoin = "round";
      ctx.lineCap = "round";

      ctx.strokeStyle = "rgba(51,214,255,.22)";
      ctx.lineWidth = 10;
      ctx.beginPath();
      values.forEach((v,i)=>{ if(i===0) ctx.moveTo(px(i),py(v)); else ctx.lineTo(px(i),py(v)); });
      ctx.stroke();

      ctx.strokeStyle = "rgba(51,214,255,.95)";
      ctx.lineWidth = 2.6;
      ctx.beginPath();
      values.forEach((v,i)=>{ if(i===0) ctx.moveTo(px(i),py(v)); else ctx.lineTo(px(i),py(v)); });
      ctx.stroke();

      values.forEach((v,i)=>{
        ctx.fillStyle = "rgba(255,255,255,.9)";
        ctx.beginPath(); ctx.arc(px(i), py(v), 3.2, 0, Math.PI*2); ctx.fill();
      });
    }

    function drawBarChart(canvasId, values){
      const c = document.getElementById(canvasId);
      const ctx = c.getContext("2d");
      const w = c.width, h = c.height;
      ctx.clearRect(0,0,w,h);

      ctx.globalAlpha = 0.22;
      ctx.strokeStyle = "#ffffff";
      ctx.lineWidth = 1;
      for(let i=1;i<6;i++){
        const y = (h/6)*i;
        ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(w,y); ctx.stroke();
      }
      ctx.globalAlpha = 1;

      const pad = 36;
      const maxV = Math.max(...values);
      const bw = (w - pad*2) / (values.length*1.4);
      const gap = bw*0.4;

      values.forEach((v,i)=>{
        const x = pad + i*(bw+gap);
        const barH = (h - pad*2) * (v/maxV);
        const y = (h - pad) - barH;

        ctx.fillStyle = "rgba(51,214,255,.18)";
        ctx.fillRect(x-2, y-2, bw+4, barH+4);

        const grad = ctx.createLinearGradient(0,y,0,y+barH);
        grad.addColorStop(0, "rgba(51,214,255,.60)");
        grad.addColorStop(1, "rgba(46,112,255,.55)");
        ctx.fillStyle = grad;
        ctx.fillRect(x, y, bw, barH);
      });

      ctx.fillStyle = "rgba(238,243,255,.75)";
      ctx.font = "bold 12px Inter, system-ui";
      const labels = ["Air","Sea","Land"];
      labels.forEach((t,i)=>{
        const x = pad + i*(bw+gap) + bw/2;
        ctx.textAlign = "center";
        ctx.fillText(t, x, h-12);
      });
    }

    let chartsDrawn = false;
    function drawCharts(){
      if(chartsDrawn) return;
      chartsDrawn = true;
      drawLineChart("chartLine", [82,85,84,88,90,92,93,94]);
      drawBarChart("chartBars", [62,78,55]);
    }

    const visionSection = document.getElementById("vision");
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{ if(e.isIntersecting) drawCharts(); });
    }, { threshold: 0.25 });
    io.observe(visionSection);

    // Language
    const dict = (function(){
      return {
        en: { brand:"New Style Logistics LLC", brandSub:"Dubai, United Arab Emirates",
          navAbout:"About", navVision:"Vision", navServices:"Services", navTools:"Tools", navQuote:"Quote", navContact:"Contact",
          ctaQuote:"Get Quote",
          heroEyebrow:"High-Tech Freight & Logistics",
          heroTitle:"Dubai logistics with real-time clarity — fast, compliant, and controlled.",
          heroDesc:"Air freight, sea freight (FCL/LCL), land transport, customs clearance, cargo handling & warehousing — engineered for visibility and speed.",
          trackBtn:"Track", ctaTalk:"Talk to our expert team", ctaCalc:"Volumetric Weight Calculator", ctaServices:"See services",
          b1:"UAE & GCC coverage", b2:"Customs-ready compliance", b3:"24/7 quick response",
          trustTitle:"Partners & Certifications", trustHint:"premium grayscale slider",
          aboutKicker:"About", aboutTitle:"Boutique Dubai execution. Global-standard operations.",
          aboutDesc:"We deliver freight and clearance services with a compliance-first mindset, clear communication, and time-protected planning.",
          a1t:"Visibility (single point of contact)", a1d:"Clear updates and fast replies with next-step guidance — built for businesses.",
          a2t:"Compliance-first processing", a2d:"Customs documentation support to reduce rejections, delays, and unexpected holds.",
          a3t:"Controlled handling & safety", a3d:"Standard handling practices for safer cargo movement across every mode.",
          a4t:"Flexible warehousing", a4d:"Storage and dispatch support scaled to your business needs.",
          visionK:"Vision & Growth", visionT:"Data-driven planning for faster deliveries", visionD:"Interactive visuals (built-in) that communicate modern operations and efficiency.",
          c1t:"On-time performance trend", c1s:"illustrative", c2t:"Mode mix (Air / Sea / Land)", c2s:"illustrative",
          svcK:"Services", svcT:"End-to-end freight & clearance services", svcD:"Perfect image scaling on mobile and premium crop on desktop.",
          sAirT:"Air Freight", sAirD:"Priority movement for urgent, time-sensitive shipments with strong documentation support.",
          sSeaT:"Sea Freight (FCL / LCL)", sSeaD:"Cost-efficient container and consolidation options with reliable planning.",
          sLandT:"Land Transport", sLandD:"Reliable delivery across UAE and GCC routes with scheduled control.",
          sCusT:"Customs Clearance", sCusD:"Compliance-focused clearance support to minimize delays and protect timelines.",
          sCargoT:"Cargo Handling", sCargoD:"Safe loading, unloading, and movement aligned with handling standards.",
          sWhT:"Warehousing", sWhD:"Organized storage, inventory handling, and dispatch support.",
          toolsK:"Shipping Tools", toolsT:"Utility center (calculator + documents)", toolsD:"Premium utilities that make the website feel like a global leader platform.",
          calcT:"Volumetric Weight Calculator", calcD:"Formula: (L × W × H) / 5000 (cm).",
          len:"Length (cm)", wid:"Width (cm)", hei:"Height (cm)", calcBtn:"Calculate", resetBtn:"Reset",
          calcHint:"Enter dimensions to calculate volumetric weight.",
          dlT:"Download Center", dlD:"Add your PDF templates later (no broken links today).",
          dl1:"Shipper's Letter of Instruction", dl2:"Commercial Invoice Template", dl3:"Packing List Template", pdfTemp:"PDF template",
          qK:"Smart Quote", qT:"Request a Quote (3-step)", qD:"Works on GitHub Pages: opens a ready email draft automatically.",
          st1:"1) Contact", st2:"2) Shipment", st3:"3) Confirm",
          name:"Your Name", email:"Email Address", phone:"Phone / WhatsApp (optional)",
          next:"Next", back:"Back", mode:"Mode", incoterm:"Incoterm (optional)", from:"From (City/Country)", to:"To (City/Country)", details:"Cargo details",
          confirmT:"Confirm & Submit", confirmD:"We’ll open a ready email draft to alwahti@newstylelogistics.com.",
          submit:"Submit", qHint:"For fastest response, include pickup location, destination, cargo type, weight/dimensions, and preferred mode.",
          fastK:"Fast response", fastT:"Talk to our expert team", fastD:"Prefer WhatsApp or call? Use quick actions — we respond fast.",
          contactK:"Contact", contactT:"Get In Touch · 24×7", contactD:"We reply fast via WhatsApp, call, or email. Share your shipment details and we will assist immediately.",
          quickT:"Quick actions", addrK:"Address", addrT:"Company Address & Map", officeAddr:"Office Address",
          addrLine:"Office #2, Thumbay Clinic Building, Near Marhaba Mall, Ras Al Khor, Dubai, UAE",
          openMaps:"Open in Google Maps",
          hoursK:"Hours", hoursT:"Working Hours",
          monfri:"Monday to Friday", sat:"Saturday", sun:"Sunday", closed:"Closed",
          hoursHint:"For urgent shipments, contact us via WhatsApp anytime and our team will guide you quickly.",
          footerSub:"Freight · Logistics · Customs · Warehousing",
          rights:"All Rights Reserved."
        },
        ar: { brand:"نيو ستايل لوجستكس ذ.م.م", brandSub:"دبي، الإمارات العربية المتحدة",
          navAbout:"من نحن", navVision:"الرؤية", navServices:"الخدمات", navTools:"الأدوات", navQuote:"عرض سعر", navContact:"تواصل",
          ctaQuote:"اطلب عرض",
          heroEyebrow:"شحن ولوجستيات بتقنية عالية",
          heroTitle:"لوجستيات دبي بوضوح لحظي — سرعة، التزام، وتحكم.",
          heroDesc:"شحن جوي، بحري (FCL/LCL)، بري، تخليص جمركي، مناولة، وتخزين — مصمم للوضوح والسرعة.",
          trackBtn:"تتبع", ctaTalk:"تواصل مع فريق الخبراء", ctaCalc:"حاسبة الوزن الحجمي", ctaServices:"عرض الخدمات",
          b1:"تغطية الإمارات والخليج", b2:"جاهزية جمركية", b3:"رد سريع 24/7",
          trustTitle:"شركاء وشهادات", trustHint:"شريط احترافي بالأبيض والأسود",
          aboutKicker:"من نحن", aboutTitle:"تنفيذ دبي بطابع راقٍ. معايير عالمية.",
          aboutDesc:"نقدم خدمات شحن وتخليص بمنهجية التزام عالية وتواصل واضح وخطط تحمي الوقت.",
          a1t:"وضوح (نقطة اتصال واحدة)", a1d:"تحديثات واضحة ورد سريع بخطوات محددة للأعمال.",
          a2t:"إجراءات التزام أولاً", a2d:"دعم الوثائق الجمركية لتقليل الرفض والتأخير.",
          a3t:"مناولة آمنة وتحكم", a3d:"معايير مناولة لحركة أكثر أمانًا عبر كل وسيلة.",
          a4t:"تخزين مرن", a4d:"تخزين ودعم توزيع قابل للتوسع حسب احتياجك.",
          visionK:"الرؤية والنمو", visionT:"تخطيط يعتمد على البيانات لتسليم أسرع", visionD:"رسوم تفاعلية تعكس عمليات حديثة وكفاءة.",
          c1t:"اتجاه الالتزام بالوقت", c1s:"تمثيلي", c2t:"مزيج الوسائل (جوي/بحري/بري)", c2s:"تمثيلي",
          svcK:"الخدمات", svcT:"خدمات شحن وتخليص شاملة", svcD:"تناسق الصور على الهاتف وقص احترافي على الكمبيوتر.",
          sAirT:"الشحن الجوي", sAirD:"أولوية للشحنات العاجلة مع دعم وثائق قوي.",
          sSeaT:"الشحن البحري (FCL / LCL)", sSeaD:"خيارات اقتصادية للحاويات والتجميع مع تخطيط موثوق.",
          sLandT:"النقل البري", sLandD:"تسليم موثوق داخل الإمارات والخليج بجدولة وتحكم.",
          sCusT:"التخليص الجمركي", sCusD:"دعم تخليص يركز على الالتزام لتقليل التأخير.",
          sCargoT:"مناولة البضائع", sCargoD:"تحميل وتفريغ وحركة آمنة وفق معايير مناولة.",
          sWhT:"التخزين", sWhD:"تخزين وإدارة مخزون ودعم توزيع.",
          toolsK:"أدوات الشحن", toolsT:"مركز أدوات (حاسبة + مستندات)", toolsD:"أدوات تجعل الموقع يبدو كمنصة عالمية.",
          calcT:"حاسبة الوزن الحجمي", calcD:"المعادلة: (الطول × العرض × الارتفاع) / 5000 (سم).",
          len:"الطول (سم)", wid:"العرض (سم)", hei:"الارتفاع (سم)", calcBtn:"احسب", resetBtn:"إعادة",
          calcHint:"أدخل الأبعاد لحساب الوزن الحجمي.",
          dlT:"مركز التنزيل", dlD:"أضف ملفات PDF لاحقًا (بدون روابط مكسورة اليوم).",
          dl1:"خطاب تعليمات الشاحن", dl2:"نموذج فاتورة تجارية", dl3:"نموذج قائمة تعبئة", pdfTemp:"نموذج PDF",
          qK:"عرض ذكي", qT:"طلب عرض سعر (3 خطوات)", qD:"يعمل على GitHub Pages — يفتح مسودة بريد جاهزة.",
          st1:"1) البيانات", st2:"2) الشحنة", st3:"3) تأكيد",
          name:"الاسم", email:"البريد الإلكتروني", phone:"الهاتف/واتساب (اختياري)",
          next:"التالي", back:"رجوع", mode:"النوع", incoterm:"إنكوترمز (اختياري)", from:"من (مدينة/دولة)", to:"إلى (مدينة/دولة)", details:"تفاصيل الشحنة",
          confirmT:"تأكيد وإرسال", confirmD:"سنفتح مسودة بريد إلى alwahti@newstylelogistics.com.",
          submit:"إرسال", qHint:"لأسرع رد: اكتب موقع الاستلام والوجهة ونوع البضاعة والوزن/الأبعاد والوسيلة المفضلة.",
          fastK:"رد سريع", fastT:"تواصل مع فريق الخبراء", fastD:"واتساب أو اتصال؟ استخدم الأزرار السريعة — نرد بسرعة.",
          contactK:"تواصل", contactT:"تواصل معنا · 24×7", contactD:"نرد بسرعة عبر واتساب أو اتصال أو بريد. شارك تفاصيل الشحنة وسنساعدك فورًا.",
          quickT:"إجراءات سريعة", addrK:"العنوان", addrT:"عنوان الشركة والخريطة", officeAddr:"عنوان المكتب",
          addrLine:"مكتب رقم 2، مبنى ثامبي كلينك، قرب مرحبا مول، رأس الخور، دبي، الإمارات",
          openMaps:"افتح في خرائط Google",
          hoursK:"ساعات العمل", hoursT:"ساعات العمل",
          monfri:"الإثنين إلى الجمعة", sat:"السبت", sun:"الأحد", closed:"مغلق",
          hoursHint:"للشحنات العاجلة، تواصل عبر واتساب في أي وقت وسنرشدك بسرعة.",
          footerSub:"شحن · لوجستيات · جمارك · تخزين",
          rights:"جميع الحقوق محفوظة."
        }
      };
    })();

    function applyLang(lang){
      const isAr = lang === "ar";
      document.documentElement.lang = isAr ? "ar" : "en";
      document.documentElement.dir = isAr ? "rtl" : "ltr";
      document.getElementById("btnEn").classList.toggle("active", !isAr);
      document.getElementById("btnAr").classList.toggle("active", isAr);

      document.querySelectorAll("[data-i18n]").forEach(el=>{
        const key = el.getAttribute("data-i18n");
        const t = dict[lang] && dict[lang][key];
        if(typeof t === "string") el.innerHTML = t;
      });
    }
    document.getElementById("btnEn").addEventListener("click", ()=>applyLang("en"));
    document.getElementById("btnAr").addEventListener("click", ()=>applyLang("ar"));
  </script>
</body>
</html>
